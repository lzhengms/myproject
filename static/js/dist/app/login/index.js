define("dist/app/login/index",["$","../lang","../../lib/util/bom/cookie","../../lib/util/dom/action","../../lib/util/ajax","../../lib/util/json","../../lib/util/dom/placeholder","../../lib/util/dom/position","../../lib/util/bom/browser","../../lib/util/dom/inputor","../../lib/util/timer"],function(a){var b=a("$"),c=a("../lang");c.setLang("tw");var d=a("../../lib/util/dom/action"),e=(a("../../lib/util/ajax"),a("../../lib/util/json"),a("../../lib/util/dom/placeholder")),f=a("../../lib/util/bom/cookie"),g=f.get("uid");b("input[name=account]").val(g),e.render();var h=function(){b(".login-codeimg").attr("src",window.imgCodeUrl+"?r="+Math.random())},i=function(a){b(a).attr({val:b(a).val(),style:"background: gray",disabled:"disabled"}).val("加载中...")},j=function(a){b(a).removeAttr("style").attr("disabled",!1).val(b(a).attr("val"))};b("input[name=account], input[name=password],input[name=checkcode]").each(function(){b(this).keydown(function(a){(13===a.keyCode||"13"===a.keyCode)&&b("input[name=submit]").trigger("click")})}),b("input[type=password]").bind("paste",function(){var a=b(this);setTimeout(function(){a.val("")},1)}),d.listen({changeImg:function(){h()},login:function(){var a=b("input[name=account]"),c=b("input[name=password]"),d=b("input[name=checkcode]"),e={};if(""===a.val())return a.css("border","2px solid red"),void b(".err-tip").html("用户名不能为空");if(a.css("border","none"),""===c.val())return c.css("border","2px solid red"),void b(".err-tip").html("密码不能为空");if(c.css("border","none"),e.account=a.val(),-1===e.account.indexOf("@")&&(e.account+="@nd"),e.password=c.val(),b(".login-checkcode").is(":visible")){if(""===d.val())return void d.css("border","2px solid red");d.css("border","none"),e.imgcode=d.val()}b.ajax({dataType:"JSON",url:Global.loginUrl,type:"POST",data:e,beforeSend:function(){i(b("input[name=submit]"))},success:function(a){200==a.code?(j(b("input[name=submit]")),setTimeout(function(){window.location.href=window.URL.replace("https://","http://")},50)):(j(b("input[name=submit]")),1===a.needchkcode||"1"===a.needchkcode?(b(".err-tip").html(a.msg),b(".login-checkcode").show()):b(".err-tip").html(a.msg))}})}})}),define("dist/app/lang",["$","../lib/util/bom/cookie"],function(a,b,c){var d=a("$"),e=a("../lib/util/bom/cookie"),f=e.get("language");f||e.set("language",f="cn");var g={"谢谢":{en:"Thank you",tw:"謝謝"},"请稍候":{en:"Please wait",tw:"請稍候"}};for(var h in g)g[h].cn=h;c.exports={setLang:function(a){e.set("language",f=a)},get:function(a,b){return b=b||f,g[a][b]||a},set:function(a,b){g[a]=d.extend(g[a],b)}}}),define("dist/lib/util/bom/cookie",[],function(a,b,c){var d=decodeURIComponent,e=encodeURIComponent,f={set:function(a,b,c,d){c||(c=31536e6);var f=new Date;f.setTime(f.getTime()+c);var g=e(a)+"="+e(b)+";expires="+f.toGMTString();d&&(d.path&&(g+=";path="+d.path),d.domain&&(g+=";domain="+d.domain),d.secure&&(g+=";secure")),document.cookie=g},sets:function(a,b,c){for(var d in a)f.set(d,a[d],b,c)},get:function(a){var b=document.cookie;a=e(a);var c=b.indexOf(a+"="),f="";if(-1!==c){c+=a.length+1;var g=b.indexOf(";",c);f=d(-1===g?b.substring(c):b.substring(c,g))}return f},del:function(){var a=new Date,b=arguments.length,c=arguments[b-1],d="object"==typeof c;c=d?c:"",a.setTime(a.getTime()-864e5);for(var e=0,g=d?b-1:b;g>e;e++)f.set(arguments[e],"",a,c)}};c.exports=f}),define("dist/lib/util/dom/action",["$"],function(a){var b=a("$"),c={dom:[],eventType:[],action:[]},d="data-action",e={setActionKey:function(a){d=a,e.setActionKey=null},listen:function(a,e,f){a=a||{},e=b(e?e:document),f=f||"click";var g=b.inArray(e[0],c.dom);if(-1!==g&&c.eventType[g]!==f&&(g=-1),-1===g)c.dom.push(e[0]),c.eventType.push(f),c.action.push(a),g=c.action.length-1,e[f](function(a){var e=b(a.target),f=e.attr(d),h=e;f||(h=e.closest("["+d+"]"),f=h.attr(d));var i=!0,j=c.action[g],k=j[f];if(k)if(b.isFunction(k.not)&&(k.node&&k.node[0]!==h[0]&&k.not.call(k.scope||e,a,k.node,f),k.node=h,k.using=!0),b.isFunction(k))i=k.call(e,a,h,f);else if(b.isFunction(k.is)||b.isFunction(k.action)){var l=k.is||k.action;i=l.call(k.scope||e,a,h,f)}for(var m=0,n=c.action.length;n>m;m++){var o=c.action[m];for(var p in o)p!==f&&o[p]&&o[p].not&&b.isFunction(o[p].not)&&o[p].using&&(o[p].using=!!o[p].not.call(o[p].scope||e,a,o[p].node,f))}if(-1===i)a.stopPropagation();else{if(i===!0)return!0;if(i===!1)return!1;a.preventDefault()}});else{var h=c.action[g];for(var i in a)h[i]=a[i]}return e}};return e}),define("dist/lib/util/ajax",["$"],function(a,b,c){var d=a("$"),e={},f={},g={loginPage:"/",noPermissionAction:function(){location.href=g.loginPage},errorAction:function(){}},h={success:function(a){return a&&200===+a.code},permission:function(a){return a&&401===+a.code}},i=function(a,b,c){var e;return e=b&&b.rule&&d.isFunction(b.rule[c])?b.rule[c]:h[c],e(a)===!0};d(document).keydown(function(a){return 27===a.keyCode?!1:void 0}),window.ActiveXObject&&d.ajaxSetup({cache:!1});var j={setSuccessRule:function(a){h.success=function(b){return a(b)},j.setSuccessRule=null},setPermissionRule:function(a){h.permission=function(b){return a(b)},j.setPermissionRule=null},setNoPermissionAction:function(a){g.noPermissionAction=a,j.setNoPermissionAction=null},setErrorAction:function(a){g.errorAction=a,j.setErrorAction=null},base:function(a){var b=d.extend({},a||{});return!b.before||b.before&&b.before()!==!1?(b.dataType="json",b.type=a.type||"GET",b.success=function(c){i(c,b,"success")?a.success&&a.success(c):i(c,b,"permission")?d.isFunction(a.permission)?a.permission(c):g.noPermissionAction():d.isFunction(a.error)?a.error(c):g.errorAction(c)},b.error=function(b,c){"abort"!==c&&(d.isFunction(a.error)?a.error(b,c):g.errorAction(b,c))},b.complete=function(b,c){d.isFunction(a.complete)&&a.complete(b,c)},d.ajax(b)):void 0},single:function(a){e[a]||(e[a]={});var b={send:function(b){var c=e[a].url&&b.url===e[a].url;if(c)if(typeof b.data==typeof e[a].data&&"object"==typeof b.data){for(var f in b.data)if(b.data[f]!==e[a].data[f]){c=!1;break}}else c=b.data===e[a].data;if(c)return!1;e[a].xhr&&e[a].xhr.abort();var g=b.complete;b.complete=function(b,c){e[a]={},d.isFunction(g)&&g(b,c)},e[a]={xhr:j.base(b),url:b.url,data:b.data}},abort:function(){e[a]&&e[a].xhr&&4!==e[a].xhr.readyState&&(e[a].xhr.abort(),e[a].xhr=null)}};return b},pool:function(a,b,c){if(!f[a]){var e=0;f[a]={};var g=f[a];b=Math.max(1,parseInt(b,10)||1),c=Math.max(1,parseInt(c,10)||1);for(var h=1;c>=h;h++)g[h]=[];var i={},k=function(){if(b>e)for(var a=1;c>=a;a++)if(g[a].length>0){var f=g[a].shift();if(f){var h=+new Date+"_"+Math.random(),l=f.complete;e++,f.complete=function(a){return function(b,c){e--,"success"!==c&&b&&b.abort(),d.isFunction(l)&&l(b,c),i[a]=null,delete i[a],k()}}(h),i[h]=j.base(f);break}}},l={add:function(a,b){b&&g[b]?g[b].push(a):g[c].push(a),k()},abort:function(){if(g){for(var a=1;c>=a;a++)g[a].length=0;for(var b in i)i[b].abort()}}};return l}}};c.exports=j}),define("dist/lib/util/json",[],function(require,exports,module){"object"!=typeof JSON&&(JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","        ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),module.exports=window.JSON}),define("dist/lib/util/dom/placeholder",["$","./position","../bom/browser","./inputor","../timer"],function(a,b,c){var d=a("$"),e=a("./position"),f=(a("./inputor"),function(){var a=0;return function(){return 0===a&&(a="placeholder"in document.createElement("input")),a}}()),g=function(a,b){if(!f()&&(a=d(a),!a.data("placeholder"))){b=b||a.attr("placeholder");var c=d('<span class="placeholder">'+b+"</span>"),g=parseInt(a.css("line-height"))+4;a.after(c),c.css({color:"#bbb",height:g,lineHeight:g+"px",paddingLeft:"9px"}),e.pin({element:c},{element:a}),a.timer(function(a){c[a.length?"hide":"show"]()}),c.bind("focus click",function(){a.focus()}),a.val().length&&c.hide(),a.data("placeholder",!0)}};g.render=function(){d("[placeholder]").placehoder()},d.fn.placehoder=function(){this.each(function(){g(this)})},d(function(){f()||d(window).bind("resize.placeholder",function(){d("[placeholder]").each(function(a,b){b=d(b);var c=b.nextAll(".placeholder").eq(0);e.pin({element:c},{element:b})})})}),c.exports=g}),define("dist/lib/util/dom/position",["$","../bom/browser"],function(a,b){function c(a){a=h(a)||{},a.nodeType&&(a={element:a});var b=h(a.element)||j;if(1!==b.nodeType)throw new Error("posObject.element is invalid.");var c={element:b,x:a.x||0,y:a.y||0},d=b===j||"VIEWPORT"===b._id;return c.offset=function(){return m?{left:0,top:0}:d?{left:k(document).scrollLeft(),top:k(document).scrollTop()}:k(b).offset()},c.size=function(){var a=k(d?window:b);return{width:a.outerWidth(),height:a.outerHeight()}},c}function d(a){a.x=e(a.x,a,"width"),a.y=e(a.y,a,"height")}function e(a,b,c){if(a+="",a=a.replace(/px/gi,""),/\D/.test(a)&&(a=a.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==a.indexOf("%")&&(a=a.replace(/(\d+(?:\.\d+)?)%/gi,function(a,d){return b.size()[c]*(d/100)})),/[+\-*\/]/.test(a))try{a=new Function("return "+a)()}catch(d){throw new Error("Invalid position value: "+a)}return g(a)}function f(a){var b=a.offsetParent();b[0]===document.documentElement&&(b=k(document.body)),n&&b.css("zoom",1);var c=b[0]===document.body?{left:0,top:0}:b.offset();return c.top+=g(b.css("border-top-width")),c.left+=g(b.css("border-left-width")),c}function g(a){return parseFloat(a,10)||0}function h(a){return k(a)[0]}var i=b,j={_id:"VIEWPORT",nodeType:1},k=a("$"),l=a("../bom/browser"),m=!1,n=l.ie6;i.pin=function(a,b){a=c(a),b=c(b);var e=k(a.element);"fixed"!==e.css("position")||n?(e.css("position","absolute"),m=!1):m=!0,d(a),d(b);var g=f(e),h=b.offset(),i=h.top+b.y-a.y-g.top,j=h.left+b.x-a.x-g.left;e.css({left:j,top:i})},i.center=function(a,b){i.pin({element:a,x:"50%",y:"50%"},{element:b,x:"50%",y:"50%"})},i.VIEWPORT=j}),define("dist/lib/util/bom/browser",[],function(a,b,c){c.exports=function(){var a=!!window.ActiveXObject,b=!!window.devicePixelRatio,c={ie:a,ie6:a&&!window.XMLHttpRequest,ie7:a&&"7."===navigator.appVersion.match(/7./i),ie8:!!window.XDomainRequest,ie9:a&&1,firefox:!!document.getBoxObjectFor||"mozInnerScreenX"in window,opera:b&&!!window.opera,safari:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,chrome:b&&!!window.chrome},d=function(){if(c.ie||c.ie6||c.ie7||c.ie8||c.ie9)return"IE";for(var a in c)if(c.hasOwnProperty(a)&&c[a]&&"is"!=a)return a;return"IE"}();return c.is=d,c}()}),define("dist/lib/util/dom/inputor",["$","../timer"],function(a,b,c){var d=a("$"),e=a("../timer"),f=function(a,b,c){a=d(a),c=c||{};var f=a.val(),g=!1,h=e.debounce(function(d){if(g){var e=a.val();(c.keep===!0||d===!0||e!==f)&&(b(e,a),f=e),g&&h()}},c.timer||128);a.bind("focus.timer",function(){g=!0,h(!0)}),a.bind("blur.timer",function(){c.silentBlur||b(a.val(),a),g=!1})};d.fn.timer=function(a,b){this.each(function(){f(this,a,b)})},c.exports=f}),define("dist/lib/util/timer",[],function(a,b,c){var d={throttle:function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}}};c.exports=d});